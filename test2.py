import multiprocessing as mp
import os 
from time import sleep 

def worker(msg):
    print(os.getpid())
    sleep(2)
    print(msg)
    return msg

p = mp.Pool(processes = 4)

pool_result = []
for i in range(10):
    msg = 'hello-%d'%i
    r = p.apply_async(worker,(msg,))
    pool_result.append(r)

for r in pool_result:
    print('return:',r)

p.close()
p.join()
